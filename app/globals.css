@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #1d1d1f;
  --apple-blue: #0071e3;
  --apple-gray-bg: #f5f5f7;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #000000;
    --foreground: #f5f5f7;
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text',
    'Helvetica Neue', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  letter-spacing: -0.01em;
}

/* Apple-style smooth scrolling */
html {
  scroll-behavior: smooth;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* iOS Safe Area 지원 */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .pb-safe {
    padding-bottom: calc(1.5rem + env(safe-area-inset-bottom, 0px));
  }

  /* 동적 뷰포트 높이 (iOS Safari 대응) */
  .min-h-dvh {
    min-height: 100vh;
    min-height: 100dvh;
  }

  .h-dvh {
    height: 100vh;
    height: 100dvh;
  }
}

/* Apple-inspired minimal animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes subtlePulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
}

/* Celebration/Confetti Animations */
@keyframes confetti-fall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

@keyframes sparkle {
  0%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes bounce-glow {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(0, 113, 227, 0.4);
  }
  50% {
    transform: scale(1.02);
    box-shadow: 0 0 20px 5px rgba(0, 113, 227, 0.2);
  }
}

@keyframes cta-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.95;
    transform: scale(1.01);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.animate-fadeIn {
  animation: fadeIn 0.4s ease-out;
}

.animate-slideUp {
  animation: slideUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.animate-scaleIn {
  animation: scaleIn 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.animate-subtlePulse {
  animation: subtlePulse 2s ease-in-out infinite;
}

.animate-confetti-fall {
  animation: confetti-fall 3s linear forwards;
}

.animate-sparkle {
  animation: sparkle 0.6s ease-in-out;
}

.animate-bounce-glow {
  animation: bounce-glow 2s ease-in-out infinite;
}

.animate-cta-pulse {
  animation: cta-pulse 2s ease-in-out infinite;
}

.animate-shimmer {
  animation: shimmer 2s linear infinite;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 100%
  );
  background-size: 200% 100%;
}

/* Apple-style component classes */
@layer components {
  /* Primary Button - Apple Style */
  .btn-apple-primary {
    @apply relative inline-flex items-center justify-center px-6 py-3.5
           bg-apple-blue-500 text-white font-semibold text-[17px]
           rounded-apple-lg transition-all duration-200 ease-apple
           hover:bg-apple-blue-600 active:scale-[0.98] active:bg-apple-blue-700
           shadow-apple-button;
  }

  /* Secondary Button - Apple Style */
  .btn-apple-secondary {
    @apply relative inline-flex items-center justify-center px-6 py-3.5
           bg-apple-gray-100 text-apple-gray-800 font-semibold text-[17px]
           rounded-apple-lg transition-all duration-200 ease-apple
           hover:bg-apple-gray-200 active:scale-[0.98]
           shadow-apple-sm;
  }

  /* Text Button */
  .btn-apple-text {
    @apply inline-flex items-center justify-center px-4 py-2
           text-apple-blue-500 font-medium text-[15px]
           rounded-apple transition-all duration-200 ease-apple
           hover:bg-apple-blue-50 active:bg-apple-blue-100;
  }

  /* Card - Apple Style */
  .card-apple {
    @apply bg-white rounded-apple-xl shadow-apple p-6
           transition-all duration-300 ease-apple;
  }

  /* Elevated Card */
  .card-apple-elevated {
    @apply bg-white rounded-apple-xl shadow-apple-md p-6
           transition-all duration-300 ease-apple
           hover:shadow-apple-lg;
  }

  /* Input - Apple Style */
  .input-apple {
    @apply w-full bg-apple-gray-100 border-0 rounded-apple-lg
           px-4 py-3.5 text-[17px] text-apple-gray-800
           placeholder:text-apple-gray-400
           focus:outline-none focus:ring-2 focus:ring-apple-blue-500 focus:bg-white
           transition-all duration-200 ease-apple;
  }

  /* Large Currency Input */
  .input-apple-currency {
    @apply w-full bg-transparent border-0
           text-[40px] font-bold text-apple-gray-800 tracking-tight
           placeholder:text-apple-gray-300
           focus:outline-none
           transition-all duration-200 ease-apple;
  }

  /* Selection Chip */
  .chip-apple {
    @apply inline-flex items-center justify-center px-4 py-2.5
           bg-apple-gray-100 text-apple-gray-600 font-medium text-[15px]
           rounded-full transition-all duration-200 ease-apple
           hover:bg-apple-gray-200;
  }

  .chip-apple-selected {
    @apply bg-apple-blue-500 text-white
           hover:bg-apple-blue-600;
  }

  /* Progress Indicator */
  .progress-apple {
    @apply h-1 bg-apple-gray-200 rounded-full overflow-hidden;
  }

  .progress-apple-bar {
    @apply h-full bg-apple-blue-500 rounded-full
           transition-all duration-500 ease-apple;
  }

  /* Divider */
  .divider-apple {
    @apply h-px bg-apple-gray-200;
  }

  /* Section Title */
  .title-apple {
    @apply text-[28px] font-bold text-apple-gray-800 tracking-tight leading-tight;
  }

  /* Subtitle */
  .subtitle-apple {
    @apply text-[17px] text-apple-gray-500 leading-relaxed;
  }

  /* Caption */
  .caption-apple {
    @apply text-[13px] text-apple-gray-400;
  }

  /* Info Box */
  .info-apple {
    @apply bg-apple-blue-50 rounded-apple-lg p-4
           border border-apple-blue-100;
  }

  /* Success Box */
  .success-apple {
    @apply bg-green-50 rounded-apple-lg p-4
           border border-green-100;
  }
}

/* Number Input - Hide Spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Focus Ring */
*:focus-visible {
  outline: 2px solid var(--apple-blue);
  outline-offset: 2px;
}

/* Selection */
::selection {
  background-color: rgba(0, 113, 227, 0.2);
}
